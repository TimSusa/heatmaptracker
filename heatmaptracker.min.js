!function(e,t){"use strict";function n(){var e=document.getElementsByTagName("body")[0];a(e,"mousemove",i),r=setInterval(s,100)}function o(t){var n=e.onload;"function"!=typeof e.onload?e.onload=t:e.onload=function(){n(),t()}}function a(e,t,n,o){if(e.addEventListener)return e.addEventListener(t,n,o),!0;if(e.attachEvent){var a=e.attachEvent("on"+t,n);return a}e["on"+t]=n}function s(){var t,n="https://api.realtimeheatmap.com",o=e.token,a=[n,"1","channels","heatmapchannel1"].join("/");t=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.onreadystatechange=function(){4===t.readyState&&201!==t.status&&(console.log("Error when sending data...",t.responseText," ",t.status),u=!1)},t.open("POST",a,!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("X-AUTH-TOKEN",o),t.setRequestHeader("Accept","application/json");var s=JSON.stringify(l);0!==Object.keys(l).length&&u&&t.send(s)}function i(n){var o=t.body.clientWidth,a=t.body.clientHeight;l={view:c(),x:n.pageX,y:n.pageY,xMax:o,yMax:a,timestamp:(new Date).getTime(),userId:e.userId},e.isDebug&&(console.log("view: ",l.view),console.log("x: ",l.x),console.log("y: ",l.y),console.log("xMax: ",l.xMax),console.log("yMax: ",l.yMax),console.log("userId: ",l.userId))}function c(){var n=t.createElement("a");return n.href=e.location.href,n.pathname}var r,l={},u=!0;o(n)}(window,document);
